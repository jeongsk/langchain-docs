---
title: μΈν„°λ½νΈ
---

import AlphaCallout from '/snippets/alpha-lg-callout.mdx';

<AlphaCallout />

μΈν„°λ½νΈλ¥Ό μ‚¬μ©ν•λ©΄ νΉμ • μ§€μ μ—μ„ κ·Έλν”„ μ‹¤ν–‰μ„ μΌμ‹ μ¤‘μ§€ν•κ³  μ™Έλ¶€ μ…λ ¥μ„ κΈ°λ‹¤λ¦° ν›„ κ³„μ† μ§„ν–‰ν•  μ μμµλ‹λ‹¤. μ΄λ¥Ό ν†µν•΄ μ§„ν–‰ν•κΈ° μ„ν•΄ μ™Έλ¶€ μ…λ ¥μ΄ ν•„μ”ν• ν΄λ¨Ό-μΈ-λ”-λ£¨ν”„ ν¨ν„΄μ„ κµ¬ν„ν•  μ μμµλ‹λ‹¤. μΈν„°λ½νΈκ°€ νΈλ¦¬κ±°λλ©΄ LangGraphλ” [μμ†μ„±](/oss/javascript/langgraph/persistence) λ μ΄μ–΄λ¥Ό μ‚¬μ©ν•μ—¬ κ·Έλν”„ μƒνƒλ¥Ό μ €μ¥ν•κ³  μ‹¤ν–‰μ„ μ¬κ°ν•  λ•κΉμ§€ λ¬΄κΈ°ν• λ€κΈ°ν•©λ‹λ‹¤.

μΈν„°λ½νΈλ” κ·Έλν”„ λ…Έλ“μ μ–΄λ μ§€μ μ—μ„λ‚ `interrupt()` ν•¨μλ¥Ό νΈμ¶ν•μ—¬ μ‘λ™ν•©λ‹λ‹¤. μ΄ ν•¨μλ” JSON μ§λ ¬ν™” κ°€λ¥ν• λ¨λ“  κ°’μ„ λ°›μ•„ νΈμ¶μμ—κ² λ…Έμ¶ν•©λ‹λ‹¤. κ³„μ†ν•  μ¤€λΉ„κ°€ λλ©΄ `Command`λ¥Ό μ‚¬μ©ν•μ—¬ κ·Έλν”„λ¥Ό λ‹¤μ‹ νΈμ¶ν•μ—¬ μ‹¤ν–‰μ„ μ¬κ°ν•λ©°, μ΄λ” λ…Έλ“ λ‚΄λ¶€μ—μ„ `interrupt()` νΈμ¶μ λ°ν™ κ°’μ΄ λ©λ‹λ‹¤.

μ •μ  μ¤‘λ‹¨μ (νΉμ • λ…Έλ“ μ „ν›„μ— μΌμ‹ μ¤‘μ§€)κ³Ό λ‹¬λ¦¬ μΈν„°λ½νΈλ” **λ™μ **μ…λ‹λ‹¤. μ½”λ“μ μ–΄λ””μ—λ‚ λ°°μΉν•  μ μμΌλ©° μ• ν”λ¦¬μΌ€μ΄μ… λ΅μ§μ— λ”°λΌ μ΅°κ±΄λ¶€λ΅ μ‹¤ν–‰λ  μ μμµλ‹λ‹¤.


- **μ²΄ν¬ν¬μΈν…μΌλ΅ μ„μΉ μ μ§€:** μ²΄ν¬ν¬μΈν„°λ” μ •ν™•ν• κ·Έλν”„ μƒνƒλ¥Ό κΈ°λ΅ν•μ—¬ λ‚μ¤‘μ—, μ‹¬μ§€μ–΄ μ¤λ¥ μƒνƒμ—μ„λ„ μ¬κ°ν•  μ μμµλ‹λ‹¤.
- **`thread_id`λ” ν¬μΈν„°:** `invoke` λ©”μ„λ“μ μµμ…μΌλ΅ `{ configurable: { thread_id: ... } }`λ¥Ό μ‚¬μ©ν•μ—¬ μ²΄ν¬ν¬μΈν„°μ— μ–΄λ–¤ μƒνƒλ¥Ό λ΅λ“ν• μ§€ μ•λ ¤μ¤λ‹λ‹¤.
- **μΈν„°λ½νΈ νμ΄λ΅λ“λ” `__interrupt__`λ΅ λ…Έμ¶:** `interrupt()`μ— μ „λ‹¬ν• κ°’μ€ `__interrupt__` ν•„λ“λ΅ νΈμ¶μμ—κ² λ°ν™λμ–΄ κ·Έλν”„κ°€ λ¬΄μ—‡μ„ κΈ°λ‹¤λ¦¬κ³  μλ”μ§€ μ• μ μμµλ‹λ‹¤.


μ„ νƒν• `thread_id`λ” ν¨κ³Όμ μΌλ΅ μμ†μ μΈ μ»¤μ„μ…λ‹λ‹¤. μ΄λ¥Ό μ¬μ‚¬μ©ν•λ©΄ λ™μΌν• μ²΄ν¬ν¬μΈνΈλ¥Ό μ¬κ°ν•κ³ , μƒ κ°’μ„ μ‚¬μ©ν•λ©΄ λΉ μƒνƒλ΅ μƒλ΅μ΄ μ¤λ λ“λ¥Ό μ‹μ‘ν•©λ‹λ‹¤.

## `interrupt`λ¥Ό μ‚¬μ©ν• μΌμ‹ μ¤‘μ§€

`interrupt` ν•¨μλ” κ·Έλν”„ μ‹¤ν–‰μ„ μΌμ‹ μ¤‘μ§€ν•κ³  νΈμ¶μμ—κ² κ°’μ„ λ°ν™ν•©λ‹λ‹¤. λ…Έλ“ λ‚΄μ—μ„ `interrupt`λ¥Ό νΈμ¶ν•λ©΄ LangGraphλ” ν„μ¬ κ·Έλν”„ μƒνƒλ¥Ό μ €μ¥ν•κ³  μ…λ ¥κ³Ό ν•¨κ» μ‹¤ν–‰μ„ μ¬κ°ν•  λ•κΉμ§€ κΈ°λ‹¤λ¦½λ‹λ‹¤.

`interrupt`λ¥Ό μ‚¬μ©ν•λ ¤λ©΄ λ‹¤μμ΄ ν•„μ”ν•©λ‹λ‹¤:
1. κ·Έλν”„ μƒνƒλ¥Ό μ μ§€ν•κΈ° μ„ν• **μ²΄ν¬ν¬μΈν„°** (ν”„λ΅λ•μ…μ—μ„λ” μμ†μ μΈ μ²΄ν¬ν¬μΈν„° μ‚¬μ©)
2. λ°νƒ€μ„μ΄ μ–΄λ–¤ μƒνƒμ—μ„ μ¬κ°ν• μ§€ μ• μ μλ„λ΅ configμ— **thread ID**
3. μΌμ‹ μ¤‘μ§€ν•λ ¤λ” μ„μΉμ—μ„ `interrupt()` νΈμ¶ (νμ΄λ΅λ“λ” JSON μ§λ ¬ν™” κ°€λ¥ν•΄μ•Ό ν•¨)



```typescript
import { interrupt } from "@langchain/langgraph";

async function approvalNode(state: State) {
    // μΌμ‹ μ¤‘μ§€ν•κ³  μΉμΈ μ”μ²­
    const approved = interrupt("Do you approve this action?");

    // Command({ resume: ... })κ°€ μ΄ λ³€μλ΅ λ°ν™λλ” κ°’ μ κ³µ
    return { approved };
}
```


`interrupt`λ¥Ό νΈμ¶ν•λ©΄ λ‹¤μκ³Ό κ°™μ€ μΌμ΄ λ°μƒν•©λ‹λ‹¤:

1. **κ·Έλν”„ μ‹¤ν–‰μ΄ μΌμ‹ μ¤‘λ‹¨λ©λ‹λ‹¤** `interrupt`κ°€ νΈμ¶λ μ •ν™•ν• μ§€μ μ—μ„
2. **μƒνƒκ°€ μ €μ¥λ©λ‹λ‹¤** μ²΄ν¬ν¬μΈν„°λ¥Ό μ‚¬μ©ν•μ—¬ λ‚μ¤‘μ— μ‹¤ν–‰μ„ μ¬κ°ν•  μ μλ„λ΅. ν”„λ΅λ•μ…μ—μ„λ” μμ†μ μΈ μ²΄ν¬ν¬μΈν„°(μ: λ°μ΄ν„°λ² μ΄μ¤ κΈ°λ°)λ¥Ό μ‚¬μ©ν•΄μ•Ό ν•©λ‹λ‹¤
3. **κ°’μ΄ λ°ν™λ©λ‹λ‹¤** `__interrupt__` ν•μ„μ—μ„ νΈμ¶μμ—κ². JSON μ§λ ¬ν™” κ°€λ¥ν• λ¨λ“  κ°’(λ¬Έμμ—΄, κ°μ²΄, λ°°μ—΄ λ“±)μ΄ λ  μ μμµλ‹λ‹¤
4. **κ·Έλν”„κ°€ λ¬΄κΈ°ν• λ€κΈ°ν•©λ‹λ‹¤** μ‘λ‹µκ³Ό ν•¨κ» μ‹¤ν–‰μ„ μ¬κ°ν•  λ•κΉμ§€
5. **μ‘λ‹µμ΄ λ‹¤μ‹ μ „λ‹¬λ©λ‹λ‹¤** μ¬κ°ν•  λ• λ…Έλ“λ΅, `interrupt()` νΈμ¶μ λ°ν™ κ°’μ΄ λ©λ‹λ‹¤

## μΈν„°λ½νΈ μ¬κ°

μΈν„°λ½νΈκ°€ μ‹¤ν–‰μ„ μΌμ‹ μ¤‘μ§€ν• ν›„, μ¬κ° κ°’μ„ ν¬ν•¨ν•λ” `Command`λ¥Ό μ‚¬μ©ν•μ—¬ κ·Έλν”„λ¥Ό λ‹¤μ‹ νΈμ¶ν•μ—¬ μ¬κ°ν•©λ‹λ‹¤. μ¬κ° κ°’μ€ `interrupt` νΈμ¶λ΅ λ‹¤μ‹ μ „λ‹¬λμ–΄ λ…Έλ“κ°€ μ™Έλ¶€ μ…λ ¥κ³Ό ν•¨κ» μ‹¤ν–‰μ„ κ³„μ†ν•  μ μμµλ‹λ‹¤.



```typescript
import { Command } from "@langchain/langgraph";

// μ΄κΈ° μ‹¤ν–‰ - μΈν„°λ½νΈλ¥Ό λ§λ‚ μΌμ‹ μ¤‘μ§€
// thread_idλ” μ €μ¥λ μ²΄ν¬ν¬μΈνΈλ΅ λμ•„κ°€λ” μμ†μ  ν¬μΈν„°
const config = { configurable: { thread_id: "thread-1" } };
const result = await graph.invoke({ input: "data" }, config);

// λ¬΄μ—‡μ΄ μ¤‘λ‹¨λμ—λ”μ§€ ν™•μΈ
// __interrupt__λ” interrupt()μ— μ „λ‹¬ν• λ¨λ“  νμ΄λ΅λ“λ¥Ό λ°μ
console.log(result.__interrupt__);
// [{ value: 'Do you approve this action?', ... }]

// μ‚¬μ©μμ μ‘λ‹µμΌλ΅ μ¬κ°
// Command({ resume })κ°€ λ…Έλ“μ—μ„ interrupt()λ΅λ¶€ν„° ν•΄λ‹Ή κ°’μ„ λ°ν™
await graph.invoke(new Command({ resume: true }), config);
```


**μ¬κ°μ— λ€ν• μ£Όμ” μ‚¬ν•­:**

- μΈν„°λ½νΈκ°€ λ°μƒν–μ„ λ• μ‚¬μ©λ κ²ƒκ³Ό **λ™μΌν• thread ID**λ¥Ό μ¬κ° μ‹ μ‚¬μ©ν•΄μ•Ό ν•©λ‹λ‹¤
- `Command(resume=...)`μ— μ „λ‹¬λ κ°’μ΄ `interrupt` νΈμ¶μ λ°ν™ κ°’μ΄ λ©λ‹λ‹¤
- μ¬κ° μ‹ `interrupt`κ°€ νΈμ¶λ λ…Έλ“μ μ‹μ‘ λ¶€λ¶„λ¶€ν„° μ¬μ‹μ‘λλ―€λ΅ `interrupt` μ΄μ „μ λ¨λ“  μ½”λ“κ°€ λ‹¤μ‹ μ‹¤ν–‰λ©λ‹λ‹¤
- μ¬κ° κ°’μΌλ΅ JSON μ§λ ¬ν™” κ°€λ¥ν• λ¨λ“  κ°’μ„ μ „λ‹¬ν•  μ μμµλ‹λ‹¤

## μΌλ°μ μΈ ν¨ν„΄

μΈν„°λ½νΈκ°€ κ°€λ¥ν•κ² ν•λ” ν•µμ‹¬ κΈ°λ¥μ€ μ‹¤ν–‰μ„ μΌμ‹ μ¤‘μ§€ν•κ³  μ™Έλ¶€ μ…λ ¥μ„ κΈ°λ‹¤λ¦¬λ” λ¥λ ¥μ…λ‹λ‹¤. μ΄λ” λ‹¤μμ„ ν¬ν•¨ν• λ‹¤μ–‘ν• μ‚¬μ© μ‚¬λ΅€μ— μ μ©ν•©λ‹λ‹¤:

- <Icon icon="check-circle" /> [μΉμΈ μ›ν¬ν”λ΅](#approve-or-reject): μ¤‘μ”ν• μ‘μ—…(API νΈμ¶, λ°μ΄ν„°λ² μ΄μ¤ λ³€κ²½, κΈμµ κ±°λ) μ‹¤ν–‰ μ „ μΌμ‹ μ¤‘μ§€
- <Icon icon="pencil" /> [κ²€ν†  λ° μμ •](#review-and-edit-state): κ³„μ†ν•κΈ° μ „μ— μ‚¬λμ΄ LLM μ¶λ ¥ λλ” λ„κµ¬ νΈμ¶μ„ κ²€ν† ν•κ³  μμ •ν•  μ μλ„λ΅ ν—μ©
- <Icon icon="wrench" /> [λ„κµ¬ νΈμ¶ μ¤‘λ‹¨](#interrupts-in-tools): λ„κµ¬ νΈμ¶ μ‹¤ν–‰ μ „ μΌμ‹ μ¤‘μ§€ν•μ—¬ λ„κµ¬ νΈμ¶μ„ κ²€ν† ν•κ³  μμ •
- <Icon icon="shield-check" /> [μ‚¬μ©μ μ…λ ¥ κ²€μ¦](#validating-human-input): λ‹¤μ λ‹¨κ³„λ΅ μ§„ν–‰ν•κΈ° μ „ μΌμ‹ μ¤‘μ§€ν•μ—¬ μ‚¬μ©μ μ…λ ¥ κ²€μ¦

### μΉμΈ λλ” κ±°λ¶€

μΈν„°λ½νΈμ κ°€μ¥ μΌλ°μ μΈ μ‚¬μ© μ‚¬λ΅€ μ¤‘ ν•λ‚λ” μ¤‘μ”ν• μ‘μ—… μ „μ— μΌμ‹ μ¤‘μ§€ν•κ³  μΉμΈμ„ μ”μ²­ν•λ” κ²ƒμ…λ‹λ‹¤. μλ¥Ό λ“¤μ–΄, API νΈμ¶, λ°μ΄ν„°λ² μ΄μ¤ λ³€κ²½ λλ” κΈ°νƒ€ μ¤‘μ”ν• κ²°μ •μ„ μΉμΈν•λ„λ΅ μ‚¬λμ—κ² μ”μ²­ν•  μ μμµλ‹λ‹¤.



```typescript
import { interrupt, Command } from "@langchain/langgraph";

function approvalNode(state: State): Command {
  // μ‹¤ν–‰ μΌμ‹ μ¤‘μ§€; νμ΄λ΅λ“λ” result.__interrupt__μ— ν‘μ‹λ¨
  const isApproved = interrupt({
    question: "Do you want to proceed?",
    details: state.actionDetails
  });

  // μ‘λ‹µμ— λ”°λΌ λΌμ°ν…
  if (isApproved) {
    return new Command({ goto: "proceed" }); // μ¬κ° νμ΄λ΅λ“κ°€ μ κ³µλ ν›„ μ‹¤ν–‰
  } else {
    return new Command({ goto: "cancel" });
  }
}
```


κ·Έλν”„λ¥Ό μ¬κ°ν•  λ•, μΉμΈν•λ ¤λ©΄ `true`λ¥Ό, κ±°λ¶€ν•λ ¤λ©΄ `false`λ¥Ό μ „λ‹¬ν•©λ‹λ‹¤:



```typescript
// μΉμΈν•λ ¤λ©΄
await graph.invoke(new Command({ resume: true }), config);

// κ±°λ¶€ν•λ ¤λ©΄
await graph.invoke(new Command({ resume: false }), config);
```


<Accordion title="μ „μ²΄ μμ ">


    ```typescript
    import {
      Command,
      MemorySaver,
      START,
      END,
      StateGraph,
      interrupt,
    } from "@langchain/langgraph";
    import { z } from "zod";

    const State = z.object({
      actionDetails: z.string(),
      status: z.enum(["pending", "approved", "rejected"]).nullable(),
    });

    const graphBuilder = new StateGraph(State)
      .addNode("approval", async (state) => {
        // νΈμ¶μκ°€ UIμ—μ„ λ λ”λ§ν•  μ μλ„λ΅ μ„Έλ¶€ μ •λ³΄ λ…Έμ¶
        const decision = interrupt({
          question: "Approve this action?",
          details: state.actionDetails,
        });
        return new Command({ goto: decision ? "proceed" : "cancel" });
      })
      .addNode("proceed", () => ({ status: "approved" }))
      .addNode("cancel", () => ({ status: "rejected" }))
      .addEdge(START, "approval")
      .addEdge("approval", "proceed")
      .addEdge("approval", "cancel")
      .addEdge("proceed", END)
      .addEdge("cancel", END);

    // ν”„λ΅λ•μ…μ—μ„λ” λ” μμ†μ μΈ μ²΄ν¬ν¬μΈν„° μ‚¬μ©
    const checkpointer = new MemorySaver();
    const graph = graphBuilder.compile({ checkpointer });

    const config = { configurable: { thread_id: "approval-123" } };
    const initial = await graph.invoke(
      { actionDetails: "Transfer $500", status: "pending" },
      config,
    );
    console.log(initial.__interrupt__);
    // [{ value: { question: ..., details: ... } }]

    // κ²°μ •μΌλ΅ μ¬κ°; trueλ” proceedλ΅, falseλ” cancelλ΅ λΌμ°ν…
    const resumed = await graph.invoke(new Command({ resume: true }), config);
    console.log(resumed.status); // -> "approved"
    ```


</Accordion>

### μƒνƒ κ²€ν†  λ° μμ •

λ•λ•λ΅ κ³„μ†ν•κΈ° μ „μ— μ‚¬λμ΄ κ·Έλν”„ μƒνƒμ μΌλ¶€λ¥Ό κ²€ν† ν•κ³  μμ •ν•λ„λ΅ ν•  μ μμµλ‹λ‹¤. μ΄λ” LLMμ„ μμ •ν•κ±°λ‚, λ„λ½λ μ •λ³΄λ¥Ό μ¶”κ°€ν•κ±°λ‚, μ΅°μ •ν•λ” λ° μ μ©ν•©λ‹λ‹¤.



```typescript
import { interrupt } from "@langchain/langgraph";

function reviewNode(state: State) {
  // μΌμ‹ μ¤‘μ§€ν•κ³  κ²€ν† λ¥Ό μ„ν•΄ ν„μ¬ λ‚΄μ© ν‘μ‹ (result.__interrupt__μ— ν‘μ‹λ¨)
  const editedContent = interrupt({
    instruction: "Review and edit this content",
    content: state.generatedText
  });

  // μμ •λ λ²„μ „μΌλ΅ μƒνƒ μ—…λ°μ΄νΈ
  return { generatedText: editedContent };
}
```


μ¬κ°ν•  λ• μμ •λ λ‚΄μ©μ„ μ κ³µν•©λ‹λ‹¤:



```typescript
await graph.invoke(
  new Command({ resume: "The edited and improved text" }), // κ°’μ΄ interrupt()μ λ°ν™κ°’μ΄ λ¨
  config
);
```


<Accordion title="μ „μ²΄ μμ ">


    ```typescript
    import {
      Command,
      MemorySaver,
      START,
      END,
      StateGraph,
      interrupt,
    } from "@langchain/langgraph";
    import { z } from "zod";

    const State = z.object({
      generatedText: z.string(),
    });

    const builder = new StateGraph(State)
      .addNode("review", async (state) => {
        // κ²€ν† μμ—κ² μƒμ„±λ λ‚΄μ© μμ • μ”μ²­
        const updated = interrupt({
          instruction: "Review and edit this content",
          content: state.generatedText,
        });
        return { generatedText: updated };
      })
      .addEdge(START, "review")
      .addEdge("review", END);

    const checkpointer = new MemorySaver();
    const graph = builder.compile({ checkpointer });

    const config = { configurable: { thread_id: "review-42" } };
    const initial = await graph.invoke({ generatedText: "Initial draft" }, config);
    console.log(initial.__interrupt__);
    // [{ value: { instruction: ..., content: ... } }]

    // κ²€ν† μμ μμ •λ ν…μ¤νΈλ΅ μ¬κ°
    const finalState = await graph.invoke(
      new Command({ resume: "Improved draft after review" }),
      config,
    );
    console.log(finalState.generatedText); // -> "Improved draft after review"
    ```


</Accordion>

### λ„κµ¬μ—μ„μ μΈν„°λ½νΈ

λ„κµ¬ ν•¨μ λ‚΄λ¶€μ— μ§μ ‘ μΈν„°λ½νΈλ¥Ό λ°°μΉν•  μλ„ μμµλ‹λ‹¤. μ΄λ ‡κ² ν•λ©΄ λ„κµ¬κ°€ νΈμ¶λ  λ•λ§λ‹¤ λ„κµ¬ μμ²΄κ°€ μΉμΈμ„ μ„ν•΄ μΌμ‹ μ¤‘μ§€λλ©°, μ‹¤ν–‰λκΈ° μ „μ— λ„κµ¬ νΈμ¶μ„ μ‚¬λμ΄ κ²€ν† ν•κ³  μμ •ν•  μ μμµλ‹λ‹¤.

λ¨Όμ € `interrupt`λ¥Ό μ‚¬μ©ν•λ” λ„κµ¬λ¥Ό μ •μν•©λ‹λ‹¤:



```typescript
import { tool } from "@langchain/core/tools";
import { interrupt } from "@langchain/langgraph";
import { z } from "zod";

const sendEmailTool = tool(
  async ({ to, subject, body }) => {
    // μ „μ†΅ μ „ μΌμ‹ μ¤‘μ§€; νμ΄λ΅λ“λ” result.__interrupt__μ— ν‘μ‹λ¨
    const response = interrupt({
      action: "send_email",
      to,
      subject,
      body,
      message: "Approve sending this email?",
    });

    if (response?.action === "approve") {
      // μ¬κ° κ°’μ΄ μ‹¤ν–‰ μ „μ— μ…λ ¥μ„ μ¬μ •μν•  μ μμ
      const finalTo = response.to ?? to;
      const finalSubject = response.subject ?? subject;
      const finalBody = response.body ?? body;
      return `Email sent to ${finalTo} with subject '${finalSubject}'`;
    }
    return "Email cancelled by user";
  },
  {
    name: "send_email",
    description: "Send an email to a recipient",
    schema: z.object({
      to: z.string(),
      subject: z.string(),
      body: z.string(),
    }),
  },
);
```


μ΄ μ ‘κ·Ό λ°©μ‹μ€ μΉμΈ λ΅μ§μ΄ λ„κµ¬ μμ²΄μ™€ ν•¨κ» μμ–΄ κ·Έλν”„μ μ—¬λ¬ λ¶€λ¶„μ—μ„ μ¬μ‚¬μ©ν•  μ μκ² ν•λ ¤λ” κ²½μ° μ μ©ν•©λ‹λ‹¤. LLMμ€ λ„κµ¬λ¥Ό μμ—°μ¤λ½κ² νΈμ¶ν•  μ μμΌλ©°, λ„κµ¬κ°€ νΈμ¶λ  λ•λ§λ‹¤ μΈν„°λ½νΈκ°€ μ‹¤ν–‰μ„ μΌμ‹ μ¤‘μ§€ν•μ—¬ μ‘μ—…μ„ μΉμΈ, μμ • λλ” μ·¨μ†ν•  μ μμµλ‹λ‹¤.

<Accordion title="μ „μ²΄ μμ ">


    ```typescript
    import { tool } from "@langchain/core/tools";
    import { ChatAnthropic } from "@langchain/anthropic";
    import {
      Command,
      MemorySaver,
      START,
      END,
      StateGraph,
      interrupt,
    } from "@langchain/langgraph";
    import { z } from "zod";

    const sendEmailTool = tool(
      async ({ to, subject, body }) => {
        // μ „μ†΅ μ „ μΌμ‹ μ¤‘μ§€; νμ΄λ΅λ“λ” result.__interrupt__μ— ν‘μ‹λ¨
        const response = interrupt({
          action: "send_email",
          to,
          subject,
          body,
          message: "Approve sending this email?",
        });

        if (response?.action === "approve") {
          const finalTo = response.to ?? to;
          const finalSubject = response.subject ?? subject;
          const finalBody = response.body ?? body;
          console.log("[sendEmailTool]", finalTo, finalSubject, finalBody);
          return `Email sent to ${finalTo}`;
        }
        return "Email cancelled by user";
      },
      {
        name: "send_email",
        description: "Send an email to a recipient",
        schema: z.object({
          to: z.string(),
          subject: z.string(),
          body: z.string(),
        }),
      },
    );

    const model = new ChatAnthropic({ model: "claude-sonnet-4-5" }).bindTools([sendEmailTool]);

    const Message = z.object({
      role: z.enum(["user", "assistant", "tool"]),
      content: z.string(),
    });

    const State = z.object({
      messages: z.array(Message),
    });

    const graphBuilder = new StateGraph(State)
      .addNode("agent", async (state) => {
        // LLMμ΄ λ„κµ¬ νΈμ¶μ„ κ²°μ •ν•  μ μμ; μΈν„°λ½νΈκ°€ μ „μ†΅ μ „μ— μΌμ‹ μ¤‘μ§€
        const response = await model.invoke(state.messages);
        return { messages: [...state.messages, response] };
      })
      .addEdge(START, "agent")
      .addEdge("agent", END);

    const checkpointer = new MemorySaver();
    const graph = graphBuilder.compile({ checkpointer });

    const config = { configurable: { thread_id: "email-workflow" } };
    const initial = await graph.invoke(
      {
        messages: [
          { role: "user", content: "Send an email to alice@example.com about the meeting" },
        ],
      },
      config,
    );
    console.log(initial.__interrupt__); // -> [{ value: { action: 'send_email', ... } }]

    // μΉμΈ λ° μ„ νƒμ μΌλ΅ μμ •λ μΈμλ΅ μ¬κ°
    const resumed = await graph.invoke(
      new Command({
        resume: { action: "approve", subject: "Updated subject" },
      }),
      config,
    );
    console.log(resumed.messages.at(-1)); // -> send_emailμ—μ„ λ°ν™λ λ„κµ¬ κ²°κ³Ό
    ```


</Accordion>

### μ‚¬μ©μ μ…λ ¥ κ²€μ¦

λ•λ•λ΅ μ‚¬λμ μ…λ ¥μ„ κ²€μ¦ν•κ³  μ ν¨ν•μ§€ μ•μΌλ©΄ λ‹¤μ‹ μ”μ²­ν•΄μ•Ό ν•©λ‹λ‹¤. λ£¨ν”„μ—μ„ μ—¬λ¬ `interrupt` νΈμ¶μ„ μ‚¬μ©ν•μ—¬ μ΄λ¥Ό μν–‰ν•  μ μμµλ‹λ‹¤.



```typescript
import { interrupt } from "@langchain/langgraph";

function getAgeNode(state: State) {
  let prompt = "What is your age?";

  while (true) {
    const answer = interrupt(prompt); // νμ΄λ΅λ“λ” result.__interrupt__μ— ν‘μ‹λ¨

    // μ…λ ¥ κ²€μ¦
    if (typeof answer === "number" && answer > 0) {
      // μ ν¨ν• μ…λ ¥ - κ³„μ†
      return { age: answer };
    } else {
      // μ ν¨ν•μ§€ μ•μ€ μ…λ ¥ - λ” κµ¬μ²΄μ μΈ ν”„λ΅¬ν”„νΈλ΅ λ‹¤μ‹ μ”μ²­
      prompt = `'${answer}' is not a valid age. Please enter a positive number.`;
    }
  }
}
```


μ ν¨ν•μ§€ μ•μ€ μ…λ ¥μΌλ΅ κ·Έλν”„λ¥Ό μ¬κ°ν•  λ•λ§λ‹¤ λ” λ…ν™•ν• λ©”μ‹μ§€λ΅ λ‹¤μ‹ μ”μ²­ν•©λ‹λ‹¤. μ ν¨ν• μ…λ ¥μ΄ μ κ³µλλ©΄ λ…Έλ“κ°€ μ™„λ£λκ³  κ·Έλν”„κ°€ κ³„μ†λ©λ‹λ‹¤.

<Accordion title="μ „μ²΄ μμ ">


    ```typescript
    import {
      Command,
      MemorySaver,
      START,
      END,
      StateGraph,
      interrupt,
    } from "@langchain/langgraph";
    import { z } from "zod";

    const State = z.object({
      age: z.number().nullable(),
    });

    const builder = new StateGraph(State)
      .addNode("collectAge", (state) => {
        let prompt = "What is your age?";

        while (true) {
          const answer = interrupt(prompt); // νμ΄λ΅λ“λ” result.__interrupt__μ— ν‘μ‹λ¨

          if (typeof answer === "number" && answer > 0) {
            return { age: answer };
          }

          prompt = `'${answer}' is not a valid age. Please enter a positive number.`;
        }
      })
      .addEdge(START, "collectAge")
      .addEdge("collectAge", END);

    const checkpointer = new MemorySaver();
    const graph = builder.compile({ checkpointer });

    const config = { configurable: { thread_id: "form-1" } };
    const first = await graph.invoke({ age: null }, config);
    console.log(first.__interrupt__); // -> [{ value: "What is your age?", ... }]

    // μ ν¨ν•μ§€ μ•μ€ λ°μ΄ν„° μ κ³µ; λ…Έλ“κ°€ λ‹¤μ‹ ν”„λ΅¬ν”„νΈ
    const retry = await graph.invoke(new Command({ resume: "thirty" }), config);
    console.log(retry.__interrupt__); // -> [{ value: "'thirty' is not a valid age...", ... }]

    // μ ν¨ν• λ°μ΄ν„° μ κ³µ; λ£¨ν”„ μΆ…λ£ λ° μƒνƒ μ—…λ°μ΄νΈ
    const final = await graph.invoke(new Command({ resume: 30 }), config);
    console.log(final.age); // -> 30
    ```


</Accordion>

## μΈν„°λ½νΈμ κ·μΉ™

λ…Έλ“ λ‚΄μ—μ„ `interrupt`λ¥Ό νΈμ¶ν•λ©΄ LangGraphλ” λ°νƒ€μ„μ— μΌμ‹ μ¤‘μ§€ν•λ„λ΅ μ‹ νΈλ¥Ό λ³΄λ‚΄λ” μμ™Έλ¥Ό λ°μƒμ‹μΌ μ‹¤ν–‰μ„ μ¤‘λ‹¨ν•©λ‹λ‹¤. μ΄ μμ™Έλ” νΈμ¶ μ¤νƒμ„ ν†µν•΄ μ „νλκ³  λ°νƒ€μ„μ— μν•΄ ν¬μ°©λλ©°, λ°νƒ€μ„μ€ κ·Έλν”„μ— ν„μ¬ μƒνƒλ¥Ό μ €μ¥ν•κ³  μ™Έλ¶€ μ…λ ¥μ„ κΈ°λ‹¤λ¦¬λ„λ΅ μ•λ¦½λ‹λ‹¤.

μ‹¤ν–‰μ΄ μ¬κ°λ  λ•(μ”μ²­λ μ…λ ¥μ„ μ κ³µν• ν›„), λ°νƒ€μ„μ€ μ „μ²΄ λ…Έλ“λ¥Ό μ²μλ¶€ν„° λ‹¤μ‹ μ‹μ‘ν•©λ‹λ‹¤. `interrupt`κ°€ νΈμ¶λ μ •ν™•ν• μ¤„μ—μ„ μ¬κ°λμ§€ μ•μµλ‹λ‹¤. μ΄λ” `interrupt` μ „μ— μ‹¤ν–‰λ λ¨λ“  μ½”λ“κ°€ λ‹¤μ‹ μ‹¤ν–‰λλ‹¤λ” κ²ƒμ„ μλ―Έν•©λ‹λ‹¤. λ”°λΌμ„ μΈν„°λ½νΈκ°€ μμƒλ€λ΅ λ™μ‘ν•λ„λ΅ ν•λ ¤λ©΄ λ”°λΌμ•Ό ν•  λ‡ κ°€μ§€ μ¤‘μ”ν• κ·μΉ™μ΄ μμµλ‹λ‹¤.



### `interrupt` νΈμ¶μ„ try/catchλ΅ λν•‘ν•μ§€ λ§μ„Έμ”

`interrupt`κ°€ νΈμ¶ μ§€μ μ—μ„ μ‹¤ν–‰μ„ μΌμ‹ μ¤‘μ§€ν•λ” λ°©μ‹μ€ νΉμ μμ™Έλ¥Ό λ°μƒμ‹ν‚¤λ” κ²ƒμ…λ‹λ‹¤. `interrupt` νΈμ¶μ„ try/catch λΈ”λ΅μΌλ΅ λν•‘ν•λ©΄ μ΄ μμ™Έλ¥Ό ν¬μ°©ν•κ² λκ³  μΈν„°λ½νΈκ°€ κ·Έλν”„λ΅ λ‹¤μ‹ μ „λ‹¬λμ§€ μ•μµλ‹λ‹¤.

* β… `interrupt` νΈμ¶μ„ μ¤λ¥κ°€ λ°μƒν•κΈ° μ‰¬μ΄ μ½”λ“μ™€ λ¶„λ¦¬
* β… ν•„μ”ν• κ²½μ° μ΅°κ±΄λ¶€λ΅ μ¤λ¥ ν¬μ°©

<CodeGroup>
```typescript λ΅μ§ λ¶„λ¦¬
async function nodeA(state: State) {
    // β… μΆ‹μ: λ¨Όμ € μΈν„°λ½νΈν•κ³  μ¤λ¥ μ΅°κ±΄μ„ λ³„λ„λ΅ μ²λ¦¬
    const name = interrupt("What's your name?");
    try {
        await fetchData(); // μ΄κ²ƒμ€ μ‹¤ν¨ν•  μ μμ
    } catch (err) {
        console.error(error);
    }
    return state;
}
```
```typescript μ΅°κ±΄λ¶€ μ¤λ¥ μ²λ¦¬
async function nodeA(state: State) {
    // β… μΆ‹μ: μμ™Έλ¥Ό λ‹¤μ‹ λμ§€λ©΄
    // μΈν„°λ½νΈκ°€ κ·Έλν”„λ΅ λ‹¤μ‹ μ „λ‹¬λ  μ μμ
    try {
        const name = interrupt("What's your name?");
        await fetchData(); // μ΄κ²ƒμ€ μ‹¤ν¨ν•  μ μμ
    } catch (err) {
        if (error instanceof NetworkError) {
            console.error(error);
        }
        throw error;
    }
    return state;
}
```
</CodeGroup>

* π”΄ `interrupt` νΈμ¶μ„ μΌλ° try/catch λΈ”λ΅μΌλ΅ λν•‘ν•μ§€ λ§μ„Έμ”

```typescript
async function nodeA(state: State) {
    // β λ‚μ¨: μΈν„°λ½νΈλ¥Ό μΌλ° try/catchλ΅ λν•‘ν•λ©΄ μΈν„°λ½νΈ μμ™Έλ¥Ό ν¬μ°©ν•κ² λ¨
    try {
        const name = interrupt("What's your name?");
    } catch (err) {
        console.error(error);
    }
    return state;
}
```


### λ…Έλ“ λ‚΄μ—μ„ `interrupt` νΈμ¶ μμ„λ¥Ό λ³€κ²½ν•μ§€ λ§μ„Έμ”

λ‹¨μΌ λ…Έλ“μ—μ„ μ—¬λ¬ μΈν„°λ½νΈλ¥Ό μ‚¬μ©ν•λ” κ²ƒμ€ μΌλ°μ μ΄μ§€λ§, μ£Όμν•μ§€ μ•μΌλ©΄ μμƒμΉ λ»ν• λ™μ‘μ΄ λ°μƒν•  μ μμµλ‹λ‹¤.

λ…Έλ“μ— μ—¬λ¬ μΈν„°λ½νΈ νΈμ¶μ΄ ν¬ν•¨λ κ²½μ° LangGraphλ” λ…Έλ“λ¥Ό μ‹¤ν–‰ν•λ” μ‘μ—…μ— νΉμ •ν• μ¬κ° κ°’ λ©λ΅μ„ μ μ§€ν•©λ‹λ‹¤. μ‹¤ν–‰μ΄ μ¬κ°λ  λ•λ§λ‹¤ λ…Έλ“μ μ‹μ‘ λ¶€λ¶„μ—μ„ μ‹μ‘ν•©λ‹λ‹¤. λ°μƒν•λ” κ° μΈν„°λ½νΈμ— λ€ν•΄ LangGraphλ” μ‘μ—…μ μ¬κ° λ©λ΅μ— μΌμΉν•λ” κ°’μ΄ μλ”μ§€ ν™•μΈν•©λ‹λ‹¤. μΌμΉλ” **μ—„κ²©ν•κ² μΈλ±μ¤ κΈ°λ°**μ΄λ―€λ΅ λ…Έλ“ λ‚΄ μΈν„°λ½νΈ νΈμ¶ μμ„κ°€ μ¤‘μ”ν•©λ‹λ‹¤.

* β… λ…Έλ“ μ‹¤ν–‰ μ „λ°μ— κ±Έμ³ `interrupt` νΈμ¶μ„ μΌκ΄€λκ² μ μ§€


```typescript
async function nodeA(state: State) {
    // β… μΆ‹μ: μΈν„°λ½νΈ νΈμ¶μ΄ λ§¤λ² κ°™μ€ μμ„λ΅ λ°μƒ
    const name = interrupt("What's your name?");
    const age = interrupt("What's your age?");
    const city = interrupt("What's your city?");

    return {
        name,
        age,
        city
    };
}
```


* π”΄ λ…Έλ“ λ‚΄μ—μ„ μ΅°κ±΄λ¶€λ΅ `interrupt` νΈμ¶μ„ κ±΄λ„λ›°μ§€ λ§μ„Έμ”
* π”΄ μ‹¤ν–‰ μ „λ°μ— κ±Έμ³ κ²°μ •μ μ΄μ§€ μ•μ€ λ΅μ§μ„ μ‚¬μ©ν•μ—¬ `interrupt` νΈμ¶μ„ λ£¨ν”„ν•μ§€ λ§μ„Έμ”


<CodeGroup>
```typescript μΈν„°λ½νΈ κ±΄λ„λ›°κΈ°
async function nodeA(state: State) {
    // β λ‚μ¨: μ΅°κ±΄λ¶€λ΅ μΈν„°λ½νΈλ¥Ό κ±΄λ„λ›°λ©΄ μμ„κ°€ λ³€κ²½λ¨
    const name = interrupt("What's your name?");

    // μ²« μ‹¤ν–‰μ—μ„λ” μΈν„°λ½νΈλ¥Ό κ±΄λ„λ›Έ μ μμ
    // μ¬κ° μ‹μ—λ” κ±΄λ„λ›°μ§€ μ•μ„ μ μμ - μΈλ±μ¤ λ¶μΌμΉ λ°μƒ
    if (state.needsAge) {
        const age = interrupt("What's your age?");
    }

    const city = interrupt("What's your city?");

    return { name, city };
}
```
```typescript μΈν„°λ½νΈ λ£¨ν”„
async function nodeA(state: State) {
    // β λ‚μ¨: λΉ„κ²°μ •μ  λ°μ΄ν„° κΈ°λ° λ£¨ν”„
    // μ‹¤ν–‰ κ°„ μΈν„°λ½νΈ μκ°€ λ³€κ²½λ¨
    const results = [];
    for (const item of state.dynamicList || []) {  // μ‹¤ν–‰ κ°„ λ¦¬μ¤νΈκ°€ λ³€κ²½λ  μ μμ
        const result = interrupt(`Approve ${item}?`);
        results.push(result);
    }

    return { results };
}
```
</CodeGroup>


### `interrupt` νΈμ¶μ— λ³µμ΅ν• κ°’μ„ λ°ν™ν•μ§€ λ§μ„Έμ”

μ‚¬μ©ν•λ” μ²΄ν¬ν¬μΈν„°μ— λ”°λΌ λ³µμ΅ν• κ°’μ€ μ§λ ¬ν™”ν•  μ μ—†μ„ μ μμµλ‹λ‹¤(μ: ν•¨μλ” μ§λ ¬ν™”ν•  μ μ—†μ). κ·Έλν”„λ¥Ό λ¨λ“  λ°°ν¬μ— μ μ‘ κ°€λ¥ν•κ² λ§λ“¤λ ¤λ©΄ ν•©λ¦¬μ μΌλ΅ μ§λ ¬ν™”ν•  μ μλ” κ°’λ§ μ‚¬μ©ν•λ” κ²ƒμ΄ λ¨λ²” μ‚¬λ΅€μ…λ‹λ‹¤.

* β… `interrupt`μ— κ°„λ‹¨ν• JSON μ§λ ¬ν™” κ°€λ¥ νƒ€μ… μ „λ‹¬
* β… κ°„λ‹¨ν• κ°’μ„ κ°€μ§„ λ”•μ…”λ„λ¦¬/κ°μ²΄ μ „λ‹¬



<CodeGroup>
```typescript κ°„λ‹¨ν• κ°’
async function nodeA(state: State) {
    // β… μΆ‹μ: μ§λ ¬ν™” κ°€λ¥ν• κ°„λ‹¨ν• νƒ€μ… μ „λ‹¬
    const name = interrupt("What's your name?");
    const count = interrupt(42);
    const approved = interrupt(true);

    return { name, count, approved };
}
```
```typescript κµ¬μ΅°ν™”λ λ°μ΄ν„°
async function nodeA(state: State) {
    // β… μΆ‹μ: κ°„λ‹¨ν• κ°’μ„ κ°€μ§„ κ°μ²΄ μ „λ‹¬
    const response = interrupt({
        question: "Enter user details",
        fields: ["name", "email", "age"],
        currentValues: state.user || {}
    });

    return { user: response };
}
```
</CodeGroup>


* π”΄ ν•¨μ, ν΄λμ¤ μΈμ¤ν„΄μ¤ λλ” κΈ°νƒ€ λ³µμ΅ν• κ°μ²΄λ¥Ό `interrupt`μ— μ „λ‹¬ν•μ§€ λ§μ„Έμ”



<CodeGroup>
```typescript ν•¨μ
function validateInput(value: string): boolean {
    return value.length > 0;
}

async function nodeA(state: State) {
    // β λ‚μ¨: ν•¨μλ¥Ό μΈν„°λ½νΈμ— μ „λ‹¬
    // ν•¨μλ” μ§λ ¬ν™”ν•  μ μ—†μ
    const response = interrupt({
        question: "What's your name?",
        validator: validateInput  // μ‹¤ν¨ν•¨
    });
    return { name: response };
}
```
```typescript ν΄λμ¤ μΈμ¤ν„΄μ¤
class DataProcessor {
    constructor(private config: any) {}
}

async function nodeA(state: State) {
    const processor = new DataProcessor({ mode: "strict" });

    // β λ‚μ¨: ν΄λμ¤ μΈμ¤ν„΄μ¤λ¥Ό μΈν„°λ½νΈμ— μ „λ‹¬
    // μΈμ¤ν„΄μ¤λ” μ§λ ¬ν™”ν•  μ μ—†μ
    const response = interrupt({
        question: "Enter data to process",
        processor: processor  // μ‹¤ν¨ν•¨
    });
    return { result: response };
}
```
</CodeGroup>


### `interrupt` μ „μ— νΈμ¶λλ” λ¶€μ ν¨κ³Όλ” λ©±λ“±μ„±μ΄ μμ–΄μ•Ό ν•©λ‹λ‹¤

μΈν„°λ½νΈλ” νΈμ¶λ λ…Έλ“λ¥Ό λ‹¤μ‹ μ‹¤ν–‰ν•μ—¬ μ‘λ™ν•λ―€λ΅ `interrupt` μ „μ— νΈμ¶λλ” λ¶€μ ν¨κ³Όλ” (μ΄μƒμ μΌλ΅) λ©±λ“±μ„±μ΄ μμ–΄μ•Ό ν•©λ‹λ‹¤. λ§¥λ½μƒ λ©±λ“±μ„±μ€ λ™μΌν• μ—°μ‚°μ„ μ—¬λ¬ λ² μ μ©ν•΄λ„ μ΄κΈ° μ‹¤ν–‰ μ΄ν›„ κ²°κ³Όκ°€ λ³€κ²½λμ§€ μ•λ”λ‹¤λ” κ²ƒμ„ μλ―Έν•©λ‹λ‹¤.

μλ¥Ό λ“¤μ–΄, λ…Έλ“ λ‚΄λ¶€μ— λ μ½”λ“λ¥Ό μ—…λ°μ΄νΈν•λ” API νΈμ¶μ΄ μμ„ μ μμµλ‹λ‹¤. ν•΄λ‹Ή νΈμ¶μ΄ μ΄λ£¨μ–΄μ§„ ν›„ `interrupt`κ°€ νΈμ¶λλ©΄ λ…Έλ“κ°€ μ¬κ°λ  λ• μ—¬λ¬ λ² λ‹¤μ‹ μ‹¤ν–‰λμ–΄ μ΄κΈ° μ—…λ°μ΄νΈλ¥Ό λ®μ–΄μ“°κ±°λ‚ μ¤‘λ³µ λ μ½”λ“λ¥Ό μƒμ„±ν•  μ μμµλ‹λ‹¤.

* β… `interrupt` μ „μ— λ©±λ“±μ„± μ—°μ‚° μ‚¬μ©
* β… `interrupt` νΈμ¶ ν›„μ— λ¶€μ ν¨κ³Ό λ°°μΉ
* β… κ°€λ¥ν• κ²½μ° λ¶€μ ν¨κ³Όλ¥Ό λ³„λ„ λ…Έλ“λ΅ λ¶„λ¦¬



<CodeGroup>
```typescript λ©±λ“±μ„± μ—°μ‚°
async function nodeA(state: State) {
    // β… μΆ‹μ: λ©±λ“±μ„±μ΄ μλ” upsert μ—°μ‚° μ‚¬μ©
    // μ—¬λ¬ λ² μ‹¤ν–‰ν•΄λ„ λ™μΌν• κ²°κ³Ό
    await db.upsertUser({
        userId: state.userId,
        status: "pending_approval"
    });

    const approved = interrupt("Approve this change?");

    return { approved };
}
```
```typescript μΈν„°λ½νΈ ν›„ λ¶€μ ν¨κ³Ό
async function nodeA(state: State) {
    // β… μΆ‹μ: μΈν„°λ½νΈ ν›„μ— λ¶€μ ν¨κ³Ό λ°°μΉ
    // μΉμΈμ„ λ°›μ€ ν›„ ν• λ²λ§ μ‹¤ν–‰λ¨
    const approved = interrupt("Approve this change?");

    if (approved) {
        await db.createAuditLog({
            userId: state.userId,
            action: "approved"
        });
    }

    return { approved };
}
```
```typescript λ‹¤λ¥Έ λ…Έλ“λ΅ λ¶„λ¦¬
async function approvalNode(state: State) {
    // β… μΆ‹μ: μ΄ λ…Έλ“μ—μ„λ” μΈν„°λ½νΈλ§ μ²λ¦¬
    const approved = interrupt("Approve this change?");

    return { approved };
}

async function notificationNode(state: State) {
    // β… μΆ‹μ: λ¶€μ ν¨κ³Όλ” λ³„λ„ λ…Έλ“μ—μ„ λ°μƒ
    // μΉμΈ ν›„ μ‹¤ν–‰λλ―€λ΅ ν• λ²λ§ μ‹¤ν–‰λ¨
    if (state.approved) {
        await sendNotification({
            userId: state.userId,
            status: "approved"
        });
    }

    return state;
}
```
</CodeGroup>


* π”΄ `interrupt` μ „μ— λΉ„λ©±λ“±μ„± μ—°μ‚°μ„ μν–‰ν•μ§€ λ§μ„Έμ”
* π”΄ μ΅΄μ¬ μ—¬λ¶€λ¥Ό ν™•μΈν•μ§€ μ•κ³  μƒ λ μ½”λ“λ¥Ό μƒμ„±ν•μ§€ λ§μ„Έμ”



<CodeGroup>
```typescript λ μ½”λ“ μƒμ„±
async function nodeA(state: State) {
    // β λ‚μ¨: μΈν„°λ½νΈ μ „μ— μƒ λ μ½”λ“ μƒμ„±
    // μ¬κ°ν•  λ•λ§λ‹¤ μ¤‘λ³µ λ μ½”λ“κ°€ μƒμ„±λ¨
    const auditId = await db.createAuditLog({
        userId: state.userId,
        action: "pending_approval",
        timestamp: new Date()
    });

    const approved = interrupt("Approve this change?");

    return { approved, auditId };
}
```
```typescript λ°°μ—΄μ— μ¶”κ°€
async function nodeA(state: State) {
    // β λ‚μ¨: μΈν„°λ½νΈ μ „μ— λ°°μ—΄μ— μ¶”κ°€
    // μ¬κ°ν•  λ•λ§λ‹¤ μ¤‘λ³µ ν•­λ©μ΄ μ¶”κ°€λ¨
    await db.appendToHistory(state.userId, "approval_requested");

    const approved = interrupt("Approve this change?");

    return { approved };
}
```
</CodeGroup>


## ν•¨μλ΅ νΈμ¶λλ” μ„λΈκ·Έλν”„μ™€ ν•¨κ» μ‚¬μ©

λ…Έλ“ λ‚΄μ—μ„ μ„λΈκ·Έλν”„λ¥Ό νΈμ¶ν•  λ•, λ¶€λ¨ κ·Έλν”„λ” μ„λΈκ·Έλν”„κ°€ νΈμ¶λκ³  `interrupt`κ°€ νΈλ¦¬κ±°λ **λ…Έλ“μ μ‹μ‘ λ¶€λ¶„**μ—μ„ μ‹¤ν–‰μ„ μ¬κ°ν•©λ‹λ‹¤. λ§μ°¬κ°€μ§€λ΅ **μ„λΈκ·Έλν”„**λ„ `interrupt`κ°€ νΈμ¶λ λ…Έλ“μ μ‹μ‘ λ¶€λ¶„μ—μ„ μ¬κ°ν•©λ‹λ‹¤.


```typescript
async function nodeInParentGraph(state: State) {
    someCode(); // <-- μ¬κ° μ‹ λ‹¤μ‹ μ‹¤ν–‰λ¨
    // μ„λΈκ·Έλν”„λ¥Ό ν•¨μλ΅ νΈμ¶
    // μ„λΈκ·Έλν”„μ—λ” `interrupt` νΈμ¶μ΄ ν¬ν•¨λ¨
    const subgraphResult = await subgraph.invoke(someInput);
    // ...
}

async function nodeInSubgraph(state: State) {
    someOtherCode(); // <-- μ¬κ° μ‹ λ‹¤μ‹ μ‹¤ν–‰λ¨
    const result = interrupt("What's your name?");
    // ...
}
```


## μΈν„°λ½νΈλ΅ λ””λ²„κΉ…


κ·Έλν”„λ¥Ό λ””λ²„κΉ…ν•κ³  ν…μ¤νΈν•λ ¤λ©΄ μ •μ  μΈν„°λ½νΈλ¥Ό μ¤‘λ‹¨μ μΌλ΅ μ‚¬μ©ν•μ—¬ κ·Έλν”„ μ‹¤ν–‰μ„ ν• λ²μ— ν• λ…Έλ“μ”© λ‹¨κ³„λ³„λ΅ μ§„ν–‰ν•  μ μμµλ‹λ‹¤. μ •μ  μΈν„°λ½νΈλ” λ…Έλ“ μ‹¤ν–‰ μ „ν›„μ μ •μλ μ§€μ μ—μ„ νΈλ¦¬κ±°λ©λ‹λ‹¤. κ·Έλν”„λ¥Ό μ»΄νμΌν•  λ• `interruptBefore`μ™€ `interruptAfter`λ¥Ό μ§€μ •ν•μ—¬ μ΄λ¥Ό μ„¤μ •ν•  μ μμµλ‹λ‹¤.


<Note>
μ •μ  μΈν„°λ½νΈλ” ν΄λ¨Ό-μΈ-λ”-λ£¨ν”„ μ›ν¬ν”λ΅μ— **κ¶μ¥λμ§€ μ•μµλ‹λ‹¤**. λ€μ‹  `interrupt` λ©”μ„λ“λ¥Ό μ‚¬μ©ν•μ„Έμ”.
</Note>

<Tabs>
    <Tab title="μ»΄νμΌ μ‹">

        ```typescript highlight={2,3,14,17}
        const graph = builder.compile({
            interruptBefore: ["node_a"],
            interruptAfter: ["node_b", "node_c"],
            checkpointer,
        });

        // κ·Έλν”„μ— thread ID μ „λ‹¬
        const config = {
            configurable: {
                thread_id: "some_thread"
            }
        };

        // μ¤‘λ‹¨μ κΉμ§€ κ·Έλν”„ μ‹¤ν–‰
        await graph.invoke(inputs, config);

        // κ·Έλν”„ μ¬κ°
        await graph.invoke(null, config);
        ```

        1. μ¤‘λ‹¨μ μ€ `compile` μ‹μ μ— μ„¤μ •λ©λ‹λ‹¤.
        2. `interruptBefore`λ” λ…Έλ“ μ‹¤ν–‰ μ „μ— μΌμ‹ μ¤‘μ§€ν•΄μ•Ό ν•λ” λ…Έλ“λ¥Ό μ§€μ •ν•©λ‹λ‹¤.
        3. `interruptAfter`λ” λ…Έλ“ μ‹¤ν–‰ ν›„μ— μΌμ‹ μ¤‘μ§€ν•΄μ•Ό ν•λ” λ…Έλ“λ¥Ό μ§€μ •ν•©λ‹λ‹¤.
        4. μ¤‘λ‹¨μ μ„ ν™μ„±ν™”ν•λ ¤λ©΄ μ²΄ν¬ν¬μΈν„°κ°€ ν•„μ”ν•©λ‹λ‹¤.
        5. μ²« λ²μ§Έ μ¤‘λ‹¨μ μ— λ„λ‹¬ν•  λ•κΉμ§€ κ·Έλν”„κ°€ μ‹¤ν–‰λ©λ‹λ‹¤.
        6. μ…λ ¥μΌλ΅ `null`μ„ μ „λ‹¬ν•μ—¬ κ·Έλν”„λ¥Ό μ¬κ°ν•©λ‹λ‹¤. μ΄λ ‡κ² ν•λ©΄ λ‹¤μ μ¤‘λ‹¨μ μ— λ„λ‹¬ν•  λ•κΉμ§€ κ·Έλν”„κ°€ μ‹¤ν–‰λ©λ‹λ‹¤.

    </Tab>
    <Tab title="λ°νƒ€μ„ μ‹">

        ```typescript highlight={3,4,11}
        // μ¤‘λ‹¨μ κΉμ§€ κ·Έλν”„ μ‹¤ν–‰
        graph.invoke(inputs, {
            interruptBefore: ["node_a"],
            interruptAfter: ["node_b", "node_c"],
            configurable: {
                thread_id: "some_thread"
            }
        });

        // κ·Έλν”„ μ¬κ°
        await graph.invoke(null, config);
        ```

        1. `graph.invoke`λ” `interruptBefore` λ° `interruptAfter` λ§¤κ°λ³€μμ™€ ν•¨κ» νΈμ¶λ©λ‹λ‹¤. μ΄λ” λ°νƒ€μ„ κµ¬μ„±μ΄λ©° λ¨λ“  νΈμ¶λ§λ‹¤ λ³€κ²½λ  μ μμµλ‹λ‹¤.
        2. `interruptBefore`λ” λ…Έλ“ μ‹¤ν–‰ μ „μ— μΌμ‹ μ¤‘μ§€ν•΄μ•Ό ν•λ” λ…Έλ“λ¥Ό μ§€μ •ν•©λ‹λ‹¤.
        3. `interruptAfter`λ” λ…Έλ“ μ‹¤ν–‰ ν›„μ— μΌμ‹ μ¤‘μ§€ν•΄μ•Ό ν•λ” λ…Έλ“λ¥Ό μ§€μ •ν•©λ‹λ‹¤.
        4. μ²« λ²μ§Έ μ¤‘λ‹¨μ μ— λ„λ‹¬ν•  λ•κΉμ§€ κ·Έλν”„κ°€ μ‹¤ν–‰λ©λ‹λ‹¤.
        5. μ…λ ¥μΌλ΅ `null`μ„ μ „λ‹¬ν•μ—¬ κ·Έλν”„λ¥Ό μ¬κ°ν•©λ‹λ‹¤. μ΄λ ‡κ² ν•λ©΄ λ‹¤μ μ¤‘λ‹¨μ μ— λ„λ‹¬ν•  λ•κΉμ§€ κ·Έλν”„κ°€ μ‹¤ν–‰λ©λ‹λ‹¤.

    </Tab>
</Tabs>

### Studio μ‚¬μ©

[Studio](/langsmith/studio)λ¥Ό μ‚¬μ©ν•μ—¬ κ·Έλν”„λ¥Ό μ‹¤ν–‰ν•κΈ° μ „μ— UIμ—μ„ κ·Έλν”„μ— μ •μ  μΈν„°λ½νΈλ¥Ό μ„¤μ •ν•  μ μμµλ‹λ‹¤. λν• UIλ¥Ό μ‚¬μ©ν•μ—¬ μ‹¤ν–‰μ λ¨λ“  μ§€μ μ—μ„ κ·Έλν”„ μƒνƒλ¥Ό κ²€μ‚¬ν•  μ μμµλ‹λ‹¤.

![image](/oss/images/static-interrupt.png)

---

<Callout icon="pen-to-square" iconType="regular">
  [Edit the source of this page on GitHub](https://github.com/langchain-ai/docs/edit/main/src/oss/langgraph/interrupts.mdx)
</Callout>
