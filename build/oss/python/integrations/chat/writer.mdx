---
title: ChatWriter
---

이 가이드는 WRITER [채팅](/oss/python/langchain/models/)을 시작하는 방법에 대한 간단한 개요를 제공합니다.

WRITER는 여러 채팅 모델을 제공합니다. 최신 모델과 비용, 컨텍스트 윈도우, 지원되는 입력 유형에 대한 정보는 [WRITER 문서](https://dev.writer.com/home)에서 확인할 수 있습니다.

## 개요

### 통합 세부 정보

| Class                                                                                                                    | Package          | Local | Serializable | JS support |                                        Downloads                                         |                                        Version                                         |
|:-------------------------------------------------------------------------------------------------------------------------|:-----------------| :---: | :---: |:----------:|:------------------------------------------------------------------------------------------------:|:---------------------------------------------------------------------------------------------:|
| [ChatWriter](https://github.com/writer/langchain-writer/blob/main/langchain_writer/chat_models.py#L308) | [langchain-writer](https://pypi.org/project/langchain-writer/) |      ❌       |                                       ❌                                       | ❌ | ![PyPI - Downloads](https://img.shields.io/pypi/dm/langchain-writer?style=flat-square&label=%20) | ![PyPI - Version](https://img.shields.io/pypi/v/langchain-writer?style=flat-square&label=%20) |

### 모델 기능

| [Tool calling](/oss/python/langchain/tools) | [Structured output](/oss/python/langchain/structured-output) | JSON mode | Image input | Audio input | Video input | [Token-level streaming](/oss/python/langchain/streaming/) | Native async |         [Token usage](/oss/python/langchain/models#token-usage)          | Logprobs |
| :---: |:-----------------:| :---: | :---: |  :---: | :---: | :---: | :---: |:--------------------------------:|:--------:|
| ✅ |         ✅         | ❌ | ❌ | ❌ | ❌ | ✅ | ✅ |                ✅                 |    ❌     |

### 자격 증명

[WRITER AI Studio](https://app.writer.com/aistudio/signup?utm_campaign=devrel)에 가입하고 이 [빠른 시작](https://dev.writer.com/api-guides/quickstart)을 따라 API 키를 받으세요. 그런 다음 WRITER_API_KEY 환경 변수를 설정하세요:

```python
import getpass
import os

if not os.getenv("WRITER_API_KEY"):
    os.environ["WRITER_API_KEY"] = getpass.getpass("Enter your WRITER API key: ")
```

모델 호출의 자동 추적을 원하면 아래 주석을 해제하여 [LangSmith](https://docs.smith.langchain.com/) API 키를 설정할 수도 있습니다:

```python
# os.environ["LANGSMITH_TRACING"] = "true"
# os.environ["LANGSMITH_API_KEY"] = getpass.getpass("Enter your LangSmith API key: ")
```

### 설치

`ChatWriter`는 `langchain-writer` 패키지에서 사용할 수 있습니다. 다음과 같이 설치하세요:

```python
%pip install -qU langchain-writer
```

### 인스턴스화

이제 채팅 완성을 생성하기 위해 모델 객체를 인스턴스화할 수 있습니다:

```python
from langchain_writer import ChatWriter

llm = ChatWriter(
    model="palmyra-x5",
    temperature=0,
    max_tokens=None,
    timeout=None,
    max_retries=2,
)
```

## 사용법

모델을 사용하려면 메시지 목록을 전달하고 `invoke` 메서드를 호출하세요:

```python
messages = [
    (
        "system",
        "You are a helpful assistant that translates English to French. Translate the user sentence.",
    ),
    ("human", "I love programming."),
]
ai_msg = llm.invoke(messages)
ai_msg
```

그런 다음 메시지의 콘텐츠에 액세스할 수 있습니다:

```python
print(ai_msg.content)
```

## 스트리밍

응답을 스트리밍할 수도 있습니다. 먼저 스트림을 생성하세요:

```python
messages = [
    (
        "system",
        "You are a helpful assistant that translates English to French. Translate the user sentence.",
    ),
    ("human", "I love programming. Sing a song about it"),
]
ai_stream = llm.stream(messages)
ai_stream
```

그런 다음 스트림을 반복하여 청크를 가져오세요:

```python
for chunk in ai_stream:
    print(chunk.content, end="")
```

## 도구 호출

Palmyra X5와 같은 WRITER 모델은 [도구 호출](https://dev.writer.com/api-guides/tool-calling)을 지원하여 도구와 해당 인수를 설명할 수 있습니다. 모델은 호출할 도구와 해당 도구에 대한 입력이 포함된 JSON 객체를 반환합니다.

### 도구 바인딩

`ChatWriter.bind_tools`를 사용하면 Pydantic 클래스, 딕셔너리 스키마, LangChain 도구 또는 함수까지 모델에 도구로 쉽게 전달할 수 있습니다. 내부적으로 이들은 다음과 같은 도구 스키마로 변환됩니다:

```
{
    "name": "...",
    "description": "...",
    "parameters": {...}  # JSONSchema
}
```

이들은 모든 모델 호출에 전달됩니다.

예를 들어, 주어진 위치의 날씨를 가져오는 도구를 사용하려면 Pydantic 클래스를 정의하고 `ChatWriter.bind_tools`에 전달할 수 있습니다:

```python
from pydantic import BaseModel, Field


class GetWeather(BaseModel):
    """Get the current weather in a given location"""

    location: str = Field(..., description="The city and state, e.g. San Francisco, CA")


llm.bind_tools([GetWeather])
```

그런 다음 도구와 함께 모델을 호출할 수 있습니다:

```python
ai_msg = llm.invoke(
    "what is the weather like in New York City",
)
ai_msg
```

마지막으로 도구 호출에 액세스하고 함수를 실행할 수 있습니다:

```python
print(ai_msg.tool_calls)
```

### 도구 바인딩에 대한 참고사항

`ChatWriter.bind_tools()` 메서드는 바인딩된 도구로 새 인스턴스를 생성하지 않고, 받은 `tools`와 `tool_choice`를 초기 클래스 인스턴스 속성에 저장하여 `ChatWriter` 호출 시 Palmyra LLM 호출 중에 매개변수로 전달합니다. 이 접근 방식은 `function` 및 `graph`와 같은 다양한 도구 유형을 지원할 수 있게 합니다. `Graph`는 원격으로 호출되는 WRITER Palmyra 도구 중 하나입니다. 자세한 내용은 [문서](https://dev.writer.com/api-guides/knowledge-graph#knowledge-graph)를 참조하세요.

LangChain의 도구 사용에 대한 자세한 내용은 [LangChain 도구 호출 문서](https://python.langchain.com/docs/concepts/tool_calling/)를 참조하세요.

## 배치 처리

요청을 배치 처리하고 `max_concurrency`를 설정할 수도 있습니다:

```python
ai_batch = llm.batch(
    [
        "How to cook pancakes?",
        "How to compose poem?",
        "How to run faster?",
    ],
    config={"max_concurrency": 3},
)
ai_batch
```

그런 다음 배치를 반복하여 결과를 가져오세요:

```python
for batch in ai_batch:
    print(batch.content)
    print("-" * 100)
```

## 비동기 사용

위의 모든 기능(호출, 스트리밍, 배치 처리, 도구 호출)은 비동기 사용도 지원합니다.

## 프롬프트 템플릿

[프롬프트 템플릿](https://python.langchain.com/docs/concepts/prompt_templates/)은 사용자 입력과 매개변수를 언어 모델에 대한 지시사항으로 변환하는 데 도움을 줍니다. 다음과 같이 프롬프트 템플릿과 함께 `ChatWriter`를 사용할 수 있습니다:

```python
from langchain_core.prompts import ChatPromptTemplate

prompt = ChatPromptTemplate(
    [
        (
            "system",
            "You are a helpful assistant that translates {input_language} to {output_language}.",
        ),
        ("human", "{input}"),
    ]
)

chain = prompt | llm
chain.invoke(
    {
        "input_language": "English",
        "output_language": "German",
        "input": "I love programming.",
    }
)
```

## API 레퍼런스

모든 ChatWriter 기능과 구성에 대한 자세한 문서는 [API 레퍼런스](https://python.langchain.com/api_reference/writer/chat_models/langchain_writer.chat_models.ChatWriter.html#langchain_writer.chat_models.ChatWriter)를 참조하세요.

## 추가 리소스

WRITER의 모델(비용, 컨텍스트 윈도우, 지원되는 입력 유형 포함) 및 도구에 대한 정보는 [WRITER 문서](https://dev.writer.com/home)에서 확인할 수 있습니다.

---

<Callout icon="pen-to-square" iconType="regular">
  [Edit the source of this page on GitHub](https://github.com/langchain-ai/docs/edit/main/src/oss/python/integrations/chat/writer.mdx)
</Callout>
